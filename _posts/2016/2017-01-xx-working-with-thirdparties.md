---
layout: post
title: "Working with thirdparty services - challanges and best practices"
date: "2017-01-19 07:17:17"
categories: tech-stories
authors: ["Mats A."]
---

Anyone will propably know the challange of making a descision as a member of a group. Deciding something on your own is generally simpler than finding a conclusion within a group. As soon as different interest, ideas, concepts or mindsets meet finding a satisfying compromise for everyone will be a challange. The same translates to communication between different software systems. Once you need to interact with external software services you need to adapt your implementation and sometimes make compromises. In this article I will talk about different challanges we faced as a software development team working with plenty different thirdparty services in the past years. I'll also elaborate on best practices and workflows we defined to deal with those challanges which you might find helpful once your are in the situation of working with a thirdparty service.

## Stumbelig blocks and Trap-doors

When it comes to working with thirdparty services in software development there are some tough challanges ahead of you. In this section I'll talk about the biggest challanges we already faced when working with different thirdparty services.

### Higher bug potential
As soon as you connect your software solution with another external application you already duplicate the potential of bugs within your own software. The reason for that is simply that you duplicated the potential sources that can cause failures or changes that affect your application. You can easily calculate that the amout of bugs will grow with every potential source of failiure or change.

### Difficult debugging
Speaking of bugs - having distributed potential error sources makes it also harder to track down unexpected behaviour of the software since the root cause of the issue can stem from any of the involved sources inside or outside of you own sourcecode. Most of the time you won't have access to the debugging tools or logs of an thirdparty service and even the best API documentation will lack information about unusual edge-cases. This often leads to a lot of try-and-error debugging strategies while working with foreign services. Having a direct technical communication partner for your target external services can be very helpful here. Unfortunalty this isn't always the case and even if you have a technical-contact the asynchronus communication will at least slow down your developing process because of all the interuptions and waiting times.

### In-depth knowledge required
Another challance we faced while working with thirdparty services is that some services require a lot of in-depth knowledge about the service you aim to connect to your application. Generally a one-way communication where you only fetch information from a remote source won't require as mutch knowledge about the target service as a two-way communication where you also need to push information to the service your are connecting with. This of course can vary heavily depending on the type and purpose of integration you are aspiring.

### Difficult testing conditions
Since software testing is espelcially important to cover very specific edge-cases it can be challanging to test your application properly once you connect with a external service. Good integration partners will provide you sandbox environments, test credentials and well worked out documentations of the services they offer. But like mentioned before even the best documentation might miss information about very specific corner-cases or compromises you, as the integrator, had to do in order to couple the different systems with each other. Furthermore even the slidest different in behaviour between a sandbox and a live environment can make a fatal difference. Providing a test environment that functions excatly the same as the live environment is of course the responsibility of the service owner. Altough this usually works quite well in rare cases you can run into differences that the service provider might not even be aware of. My point is not to say you shouldn't trust sandbox environments but it's always worth to keep that fact in mind, especially in case you experience an bahaviour that you fail to reproduce with a sandbox environment.

## Our weapons of choice

The workflows and best practices we follow in our team where developed over a longer duration and are still adjusted from time to time. What I describe here is by no means meant as a ultimate guidline. It's just a collection of best practices that turned out to function well for us as a team working with thirdparty services on a day to day basis.

### In-depth knowlege required
Once we know we need to create a integration with a new external service we experienced that it's very helpful to spent some time for research about the services that we want to integrate upfront. Most of the time we even go one step further and try to create a very rough prototype that spikes all the desired functionallity. Investing this effort upfront is not only helping us to create more detailed tasks out of it afterwards, it also helps identify potential missmatches of flows and concepts between the two applications to connect, collect open questions that need to be answered before starting with the integration or even discover tremendous dealbreakers early on. All this information helps our product manager with his estimations as well as it helps our team during technical plannings to consider potential issues right away and minimises the nessesity to pospone descions because we miss understanding of service specific functionallity.

### Difficult debugging
Once all the effort you took so far wasn't enough and you end up discovering one of this unwanted bugs still made it to your integration you have to face the challange of tracking down the root cause of it.
The only good practices I can provide here from experience is that you should emphasize on very understandable and comprehensive logging in your part of the integration. This will help you identifing where the nasty beetle is hiding. Comprehensive information is also important once you need to go into communication with your integration partner since it helps them to understand the situation and find the problem once they know the data you used to communicate with their service. Like in any human conversation it's the same for software services whom are communicating with each other. Finding the root cause of a missunderstanding requires both parties to participate. That means good communication with your integration partner will be very helpful.

### Higher bug potential
While discussing the challanges of dealing with thirdparty servies one major point was the increase of potential failures and changes. Unfortunatly there is no recipe for a magic-potion or a special trick that i can tell you to prevent this. Higher chance of bugs and changes is just a fact you need to accept and lern to deal with while working with thirdparies. In our experience the best you can do to face this fact is strictily following specific software quality guidelines. We spend quite some extra effort in order to produce readable and maintainable code since we know that it's very likely that we need to change things in the future. We also aggreed on following a common coding style and common conpects which you will be thankful for while debugging or changing parts of the software that where written by some co-worker of yours. Potentially the stronges arrow we, as software developers, have in our quiver to deal with constant changes to our software is automated-testing. We follow a strict line to always provide a high automated test coverage of our code to ensure we won't break existing functionallity of the software with the changes we introduce. In order to minimize the chance of bugs and share knowledge within the team it's also very important to us to do freqent code reviews. Ideally every member of our team should have know each module of the implementation we created.

When it comes to automated-testing there is another conecpt that can help you identifying changes of external services. Create automated-test which run against their API and verify all functionallity you are using with your application. Of course you then also need to run these tests on a regular basis. Your own test-pipeline will then instantly notify you about changes your integration partner introduced to their API. This of course is especially helpful in case the communication with your integration partner is not good, but it might be worth the effort even in case you have good communication with your partner. Sometimes notifications might become lost already during communication in your partners company. Relying on hard facts will always be more direct and trustworthy then relying on manual notifications.

Another strategy that at least works very well in our team is working very close with our QA engineer. Having your QA participate in concept discussions, technical-plannings and code-reviews will help him understand potential issues that might araise. Working close together also minimises the chance for mistakes due to unclear communication or lack of background knowledge. Somtimes a QA engineer might even bring in more user-oriented feedback which helps developers identifying specific users requirements. A point that worth considering not only for thirdparty situations but in general.

### Difficult testing conditions
Talking about testing your application - after testing your solution with sandbox environments it's always benefitial to test your application also against the live enviroment. This will not always be possible but if you got the chance I'd recommend to always do it. Something you should also always do is take the feedback of your live users very seriously. Especially once you wherend able to test your solution with the live environment. Furthermore working close with customer service, QA and the partner whos service you are integrating are the best practices we discovered to face the challange of testing your application.
